<div class="container">
    <h3>Cambiar contraseña</h3>
    <div class="alert alert-success" role="alert" *ngIf="cambioPasswordExitoso">
      Se ha registrado con exito. Inicie sesion para comenzar a disfrutar la mejor musica
    </div>
    <div class="alert alert-danger" role="alert" *ngIf="hayErrorPassword">
      {{errorPassword}}
    </div>
    <form [formGroup]="formUserPassword" (ngSubmit)="cambiarPassword()">
      <div class="form-group">
        <label for="userOldPassword">Contraseña anterior</label>
        <input type="password" [ngClass]="{'is-valid': formUserPassword.controls['oldPassword'].valid && formUserPassword.controls['oldPassword'].touched
                        , 'is-invalid':formUserPassword.controls['oldPassword'].invalid && formUserPassword.controls['oldPassword'].touched}"
          class="form-control" formControlName="oldPassword" id="userOldPassword" placeholder="********">
        <div class="invalid-feedback" *ngIf="formUserPassword.controls['oldPassword'].errors?.required">
          Debe ingresar la contraseña anterior
        </div>
      </div>
      <div class="form-group">
        <label for="userPassword">Contraseña</label>
        <input type="password" [ngClass]="{'is-valid': formUserPassword.controls['password'].valid && formUserPassword.controls['password'].touched
                    , 'is-invalid':formUserPassword.controls['password'].invalid && formUserPassword.controls['password'].touched}"
          class="form-control" formControlName="password" id="userPassword" placeholder="********">
        <div class="invalid-feedback" *ngIf="formUserPassword.controls['password'].errors?.pattern">
          <p>Formato de contraseña no valido</p>
          <p>Su contraseña debe tener un minimo de 8 caracteres incluyendo:</p>
          <ul>
            <li>Minisculas y mayusculas</li>
            <li>1 o mas numeros</li>
            <li>1 o mas caracteres especiales</li>
          </ul>
        </div>
        <div class="invalid-feedback" *ngIf="formUserPassword.controls['password'].errors?.required">
          Debe ingresar la contraseña
        </div>
      </div>
      <div class="form-group">
        <label for="userConfirmPassword">Repetir contraseña</label>
        <input type="password" [ngClass]="{'is-valid': formUserPassword.controls['confirmPassword'].valid && formUserPassword.controls['confirmPassword'].touched
                      , 'is-invalid':formUserPassword.controls['confirmPassword'].invalid && formUserPassword.controls['confirmPassword'].touched}"
          class="form-control" formControlName="confirmPassword" id="userConfirmPassword" placeholder="********">
        <div class="invalid-feedback" *ngIf="formUserPassword.controls['confirmPassword'].errors?.noIgual && !formUserPassword.controls['confirmPassword'].errors?.required">
          Las contraseñas no coinciden
        </div>
        <div class="invalid-feedback" *ngIf="formUserPassword.controls['confirmPassword'].errors?.required">
          Debe repetir la contraseña
        </div>
      </div>
      <!-- TODO: This is for server side, there is another version for browser defaults -->
      <div class="btn-form">
          <button type="submit" class="btn btn-outline-primary" [disabled]="formUserPassword.invalid">Cambiar contraseña</button>    
        </div>
    </form>
</div>